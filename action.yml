# action.yml
name: 'Publish Composer package'
description: 'Publishes the composer package in the current directory to a (Nexus) repository.'
inputs:
  repository:
    description: 'URL of the Nexus repository'
    required: true
  username:
    description: 'Username'
    required: true
  password:
    description: 'Password'
    required: true
  version:
    description: 'Version to publish the Composer package as'
    required: false
    default: ''
  package-path:
    description: 'Path to package to upload, relative to repository root.'
    required: false
    default: ''
runs:
  using: 'docker'
  image: 'Dockerfile'
  args:
    - --repository=${{ inputs.repository }}
    - --username=${{ inputs.username }}
    - --password=${{ inputs.password }}
  env:
    PACKAGE_PATH: ${{ inputs.package-path }}
    VERSION: ${{ inputs.version }}
    GITHUB_EVENT_NAME: ${{ github.event_name }}
    GITHUB_REF_TYPE: ${{ github.ref_type }}
    GITHUB_REF_NAME: ${{ github.ref_name }}
